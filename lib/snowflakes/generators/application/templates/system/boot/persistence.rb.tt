<%= camel_cased_application_name %>::Application.boot :persistence, namespace: true, from: :snowflakes do
  configure do |config|
    config.database_url = container[:settings].database_url
    config.global_extensions = [:postgres]
    config.connection_extensions = %i[error_sql pg_array pg_json pg_enum]
    config.auto_registration_root = container.root.join("lib/decaf_sucks/persistence").realpath.to_s
    config.auto_registration_namespace = "<%= camel_cased_application_name %>::Persistence"
  end
end
